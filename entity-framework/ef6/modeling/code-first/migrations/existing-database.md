---
title: Migrations Code First avec une base de données existante - EF6
author: divega
ms.date: 2016-10-23
ms.prod: entity-framework
ms.author: divega
ms.manager: avickers
ms.technology: entity-framework-6
ms.topic: article
ms.assetid: f0cc4f93-67dd-4664-9753-0a9f913814db
caps.latest.revision: 3
ms.openlocfilehash: 77e139a29bb4708b00fc6198a57780ce75197252
ms.sourcegitcommit: bdd06c9a591ba5e6d6a3ec046c80de98f598f3f3
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/10/2018
ms.locfileid: "39121475"
---
# <a name="code-first-migrations-with-an-existing-database"></a><span data-ttu-id="a4da6-102">Migrations Code First avec une base de données existante</span><span class="sxs-lookup"><span data-stu-id="a4da6-102">Code First Migrations with an existing database</span></span>
> [!NOTE]
> <span data-ttu-id="a4da6-103">**EF4.3 et versions ultérieures uniquement** -les fonctionnalités, API, etc. abordés dans cette page ont été introduits dans Entity Framework 4.1.</span><span class="sxs-lookup"><span data-stu-id="a4da6-103">**EF4.3 Onwards Only** - The features, APIs, etc. discussed in this page were introduced in Entity Framework 4.1.</span></span> <span data-ttu-id="a4da6-104">Si vous utilisez une version antérieure, certaines ou toutes les informations ne s’appliquent pas.</span><span class="sxs-lookup"><span data-stu-id="a4da6-104">If you are using an earlier version, some or all of the information does not apply.</span></span>

<span data-ttu-id="a4da6-105">Cet article aborde l’utilisation de Code First Migrations dans une base de données existante, qui n’a pas été créé par Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="a4da6-105">This article covers using Code First Migrations with an existing database, one that wasn’t created by Entity Framework.</span></span>

> [!NOTE]
> <span data-ttu-id="a4da6-106">Cet article suppose que vous savez comment utiliser Code First Migrations dans des scénarios de base.</span><span class="sxs-lookup"><span data-stu-id="a4da6-106">This article assumes you know how to use Code First Migrations in basic scenarios.</span></span> <span data-ttu-id="a4da6-107">Si vous n’avez pas, vous devez lire [Migrations Code First](~/ef6/modeling/code-first/migrations/index.md) avant de continuer.</span><span class="sxs-lookup"><span data-stu-id="a4da6-107">If you don’t, then you’ll need to read [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) before continuing.</span></span>

## <a name="screencasts"></a><span data-ttu-id="a4da6-108">Captures d’écran</span><span class="sxs-lookup"><span data-stu-id="a4da6-108">Screencasts</span></span>

<span data-ttu-id="a4da6-109">Si vous surveille plutôt une capture vidéo à lire cet article, les deux vidéos suivantes couvrent le même contenu que cet article.</span><span class="sxs-lookup"><span data-stu-id="a4da6-109">If you'd rather watch a screencast than read this article, the following two videos cover the same content as this article.</span></span>

### <a name="video-one-migrations---under-the-hood"></a><span data-ttu-id="a4da6-110">Une vidéo : « Migrations - sous le capot »</span><span class="sxs-lookup"><span data-stu-id="a4da6-110">Video One: "Migrations - Under the Hood"</span></span>

<span data-ttu-id="a4da6-111">[Cette capture vidéo](http://channel9.msdn.com/blogs/ef/migrations-under-the-hood) couvre le mode de suivi des migrations et utilise les informations sur le modèle pour détecter les modifications apportées au modèle.</span><span class="sxs-lookup"><span data-stu-id="a4da6-111">[This screencast](http://channel9.msdn.com/blogs/ef/migrations-under-the-hood) covers how migrations tracks and uses information about the model to detect model changes.</span></span>

### <a name="video-two-migrations---existing-databases"></a><span data-ttu-id="a4da6-112">Deux vidéo : « Migrations - bases de données »</span><span class="sxs-lookup"><span data-stu-id="a4da6-112">Video Two: "Migrations - Existing Databases"</span></span>

<span data-ttu-id="a4da6-113">Création sur les concepts de la vidéo précédente, [cet enregistrement](http://channel9.msdn.com/blogs/ef/migrations-existing-databases) explique comment activer et utiliser des migrations avec une base de données existante.</span><span class="sxs-lookup"><span data-stu-id="a4da6-113">Building on the concepts from the previous video, [this screencast](http://channel9.msdn.com/blogs/ef/migrations-existing-databases) covers how to enable and use migrations with an existing database.</span></span>

## <a name="step-1-create-a-model"></a><span data-ttu-id="a4da6-114">Étape 1 : Créer un modèle</span><span class="sxs-lookup"><span data-stu-id="a4da6-114">Step 1: Create a model</span></span>

<span data-ttu-id="a4da6-115">La première étape sera pour créer un modèle Code First ciblant votre base de données existante.</span><span class="sxs-lookup"><span data-stu-id="a4da6-115">Your first step will be to create a Code First model that targets your existing database.</span></span> <span data-ttu-id="a4da6-116">Le [Code First pour une base de données existante](~/ef6/modeling/code-first/workflows/existing-database.md) rubrique fournit des instructions détaillées sur la procédure à suivre.</span><span class="sxs-lookup"><span data-stu-id="a4da6-116">The [Code First to an Existing Database](~/ef6/modeling/code-first/workflows/existing-database.md) topic provides detailed guidance on how to do this.</span></span>

>[!NOTE]
> <span data-ttu-id="a4da6-117">Il est important de suivre le reste des étapes de cette rubrique avant d’apporter des modifications à votre modèle qui nécessiterait des modifications du schéma de base de données.</span><span class="sxs-lookup"><span data-stu-id="a4da6-117">It is important to follow the rest of the steps in this topic before making any changes to your model that would require changes to the database schema.</span></span> <span data-ttu-id="a4da6-118">Les étapes suivantes requièrent le modèle pour être synchronisé avec le schéma de base de données.</span><span class="sxs-lookup"><span data-stu-id="a4da6-118">The following steps require the model to be in-sync with the database schema.</span></span>

## <a name="step-2-enable-migrations"></a><span data-ttu-id="a4da6-119">Étape 2 : Activer les Migrations</span><span class="sxs-lookup"><span data-stu-id="a4da6-119">Step 2: Enable Migrations</span></span>

<span data-ttu-id="a4da6-120">L’étape suivante consiste à permettre des migrations.</span><span class="sxs-lookup"><span data-stu-id="a4da6-120">The next step is to enable migrations.</span></span> <span data-ttu-id="a4da6-121">Vous pouvez le faire en exécutant la **Enable-Migrations** commande dans la Console du Gestionnaire de Package.</span><span class="sxs-lookup"><span data-stu-id="a4da6-121">You can do this by running the **Enable-Migrations** command in Package Manager Console.</span></span>

<span data-ttu-id="a4da6-122">Cette commande Créer un dossier dans votre solution appelée Migrations et placer une classe unique à l’intérieur de celui-ci appelée Configuration.</span><span class="sxs-lookup"><span data-stu-id="a4da6-122">This command will create a folder in your solution called Migrations, and put a single class inside it called Configuration.</span></span> <span data-ttu-id="a4da6-123">La classe de Configuration est où vous configurez migrations pour votre application, vous pouvez trouver plus d’informations dans le [Migrations Code First](~/ef6/modeling/code-first/migrations/index.md) rubrique.</span><span class="sxs-lookup"><span data-stu-id="a4da6-123">The Configuration class is where you configure migrations for your application, you can find out more about it in the [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) topic.</span></span>

## <a name="step-3-add-an-initial-migration"></a><span data-ttu-id="a4da6-124">Étape 3 : Ajouter une migration initiale</span><span class="sxs-lookup"><span data-stu-id="a4da6-124">Step 3: Add an initial migration</span></span>

<span data-ttu-id="a4da6-125">Une fois que les migrations qui ont été créées et appliquées à la base de données locale, que vous pouvez également appliquer ces devient autres bases de données.</span><span class="sxs-lookup"><span data-stu-id="a4da6-125">Once migrations have been created and applied to the local database you may also want to apply these changes to other databases.</span></span> <span data-ttu-id="a4da6-126">Par exemple, votre base de données locale peut être une base de données de test et finalement voulez-vous également appliquer les modifications à une base de données de production et/ou bases de données de test des autres développeurs.</span><span class="sxs-lookup"><span data-stu-id="a4da6-126">For example, your local database may be a test database and you may ultimately want to also apply the changes to a production database and/or other developers test databases.</span></span> <span data-ttu-id="a4da6-127">Il existe deux options pour cette étape et dépend de celui que vous devez sélectionner le schéma d’autres bases de données est vide ou actuellement correspond au schéma de la base de données locale.</span><span class="sxs-lookup"><span data-stu-id="a4da6-127">There are two options for this step and the one you should pick depends whether or not the schema of any other databases is empty or currently matches the schema of the local database.</span></span>

-   <span data-ttu-id="a4da6-128">**Option 1 : Utiliser schéma existant comme point de départ.**</span><span class="sxs-lookup"><span data-stu-id="a4da6-128">**Option One: Use existing schema as starting point.**</span></span> <span data-ttu-id="a4da6-129">Vous devez utiliser cette approche lorsque d’autres bases de données migrations seront appliquées à l’avenir à aura le même schéma que votre base de données locale a actuellement.</span><span class="sxs-lookup"><span data-stu-id="a4da6-129">You should use this approach when other databases that migrations will be applied to in the future will have the same schema as your local database currently has.</span></span> <span data-ttu-id="a4da6-130">Par exemple, vous pouvez utiliser cela si votre base de données de test local correspond actuellement à v1 de votre base de données de production et vous devez ensuite appliquer ces migrations pour mettre à jour votre base de données de production vers la version 2.</span><span class="sxs-lookup"><span data-stu-id="a4da6-130">For example, you might use this if your local test database currently matches v1 of your production database and you will later apply these migrations to update your production database to v2.</span></span>
-   <span data-ttu-id="a4da6-131">**Option deux : Utiliser la base de données vide en tant que point de départ.**</span><span class="sxs-lookup"><span data-stu-id="a4da6-131">**Option Two: Use empty database as starting point.**</span></span> <span data-ttu-id="a4da6-132">Vous devez utiliser cette approche lorsque les autres bases de données migrations seront appliquées à l’avenir à sont vides (ou n’existent pas encore).</span><span class="sxs-lookup"><span data-stu-id="a4da6-132">You should use this approach when other databases that migrations will be applied to in the future are empty (or do not exist yet).</span></span> <span data-ttu-id="a4da6-133">Par exemple, vous pouvez utiliser cela si vous en main le développement de votre application à l’aide d’une base de données de test mais sans utiliser de migrations et vous serez ultérieurement créer une base de données de production à partir de zéro.</span><span class="sxs-lookup"><span data-stu-id="a4da6-133">For example, you might use this if you started developing your application using a test database but without using migrations and you will later want to create a production database from scratch.</span></span>

### <a name="option-one-use-existing-schema-as-a-starting-point"></a><span data-ttu-id="a4da6-134">Option 1 : Utiliser le schéma existant comme point de départ</span><span class="sxs-lookup"><span data-stu-id="a4da6-134">Option One: Use existing schema as a starting point</span></span>

<span data-ttu-id="a4da6-135">Migrations Code First utilise un instantané du modèle stocké dans la migration la plus récente pour détecter les modifications apportées au modèle (vous trouverez des informations détaillées à ce sujet dans [Migrations Code First dans les environnements d’équipe](~/ef6/modeling/code-first/migrations/teams.md)).</span><span class="sxs-lookup"><span data-stu-id="a4da6-135">Code First Migrations uses a snapshot of the model stored in the most recent migration to detect changes to the model (you can find detailed information about this in [Code First Migrations in Team Environments](~/ef6/modeling/code-first/migrations/teams.md)).</span></span> <span data-ttu-id="a4da6-136">Étant donné que nous allons supposer que les bases de données ont déjà le schéma du modèle actuel, nous allons générer une migration (nulle) vide qui contient le modèle actuel en tant qu’instantané.</span><span class="sxs-lookup"><span data-stu-id="a4da6-136">Since we are going to assume that databases already have the schema of the current model, we will generate an empty (no-op) migration that has the current model as a snapshot.</span></span>

1.  <span data-ttu-id="a4da6-137">Exécutez le **Add-Migration InitialCreate – IgnoreChanges** commande dans la Console du Gestionnaire de Package.</span><span class="sxs-lookup"><span data-stu-id="a4da6-137">Run the **Add-Migration InitialCreate –IgnoreChanges** command in Package Manager Console.</span></span> <span data-ttu-id="a4da6-138">Cela crée une migration vide avec le modèle actuel en tant qu’instantané.</span><span class="sxs-lookup"><span data-stu-id="a4da6-138">This creates an empty migration with the current model as a snapshot.</span></span>
2.  <span data-ttu-id="a4da6-139">Exécutez le **Update-Database** commande dans la Console du Gestionnaire de Package.</span><span class="sxs-lookup"><span data-stu-id="a4da6-139">Run the **Update-Database** command in Package Manager Console.</span></span> <span data-ttu-id="a4da6-140">Cela s’applique la migration InitialCreate à la base de données.</span><span class="sxs-lookup"><span data-stu-id="a4da6-140">This will apply the InitialCreate migration to the database.</span></span> <span data-ttu-id="a4da6-141">Étant donné que la migration réelle ne contient pas toutes les modifications, elle sera simplement ajouter une ligne à la \_ \_MigrationsHistory table qui indique que cette migration a déjà été appliquée.</span><span class="sxs-lookup"><span data-stu-id="a4da6-141">Since the actual migration doesn’t contain any changes, it will simply add a row to the \_\_MigrationsHistory table indicating that this migration has already been applied.</span></span>

### <a name="option-two-use-empty-database-as-a-starting-point"></a><span data-ttu-id="a4da6-142">Option deux : Utiliser la base de données vide comme point de départ</span><span class="sxs-lookup"><span data-stu-id="a4da6-142">Option Two: Use empty database as a starting point</span></span>

<span data-ttu-id="a4da6-143">Dans ce scénario, nous devons Migrations pour être en mesure de créer la base de données à partir de zéro – y compris les tables qui sont déjà présents dans notre base de données locale.</span><span class="sxs-lookup"><span data-stu-id="a4da6-143">In this scenario we need Migrations to be able to create the entire database from scratch – including the tables that are already present in our local database.</span></span> <span data-ttu-id="a4da6-144">Nous allons générer une migration InitialCreate qui inclut la logique pour créer le schéma existant.</span><span class="sxs-lookup"><span data-stu-id="a4da6-144">We’re going to generate an InitialCreate migration that includes logic to create the existing schema.</span></span> <span data-ttu-id="a4da6-145">Nous allons ensuite rendre notre base de données existante ressemble pas à cette migration a déjà été appliquée.</span><span class="sxs-lookup"><span data-stu-id="a4da6-145">We’ll then make our existing database look like this migration has already been applied.</span></span>

1.  <span data-ttu-id="a4da6-146">Exécutez le **Add-Migration InitialCreate** commande dans la Console du Gestionnaire de Package.</span><span class="sxs-lookup"><span data-stu-id="a4da6-146">Run the **Add-Migration InitialCreate** command in Package Manager Console.</span></span> <span data-ttu-id="a4da6-147">Cette opération crée une migration pour créer le schéma existant.</span><span class="sxs-lookup"><span data-stu-id="a4da6-147">This creates a migration to create the existing schema.</span></span>
2.  <span data-ttu-id="a4da6-148">Commentez tout le code dans la méthode du haut de la migration nouvellement créée.</span><span class="sxs-lookup"><span data-stu-id="a4da6-148">Comment out all code in the Up method of the newly created migration.</span></span> <span data-ttu-id="a4da6-149">Cela nous permettra à « appliquer » la migration vers la base de données local sans essayer de recréer toutes les tables etc. qui existent déjà.</span><span class="sxs-lookup"><span data-stu-id="a4da6-149">This will allow us to ‘apply’ the migration to the local database without trying to recreate all the tables etc. that already exist.</span></span>
3.  <span data-ttu-id="a4da6-150">Exécutez le **Update-Database** commande dans la Console du Gestionnaire de Package.</span><span class="sxs-lookup"><span data-stu-id="a4da6-150">Run the **Update-Database** command in Package Manager Console.</span></span> <span data-ttu-id="a4da6-151">Cela s’applique la migration InitialCreate à la base de données.</span><span class="sxs-lookup"><span data-stu-id="a4da6-151">This will apply the InitialCreate migration to the database.</span></span> <span data-ttu-id="a4da6-152">Étant donné que la migration réelle ne contient pas des modifications (étant donné que nous commenté temporairement les out), il sera simplement ajouter une ligne à la \_ \_MigrationsHistory table qui indique que cette migration a déjà été appliquée.</span><span class="sxs-lookup"><span data-stu-id="a4da6-152">Since the actual migration doesn’t contain any changes (because we temporarily commented them out), it will simply add a row to the \_\_MigrationsHistory table indicating that this migration has already been applied.</span></span>
4.  <span data-ttu-id="a4da6-153">Supprimer le commentaire le code dans la méthode à distance.</span><span class="sxs-lookup"><span data-stu-id="a4da6-153">Un-comment the code in the Up method.</span></span> <span data-ttu-id="a4da6-154">Cela signifie que lorsque cette migration est appliquée pour les futures bases de données, le schéma qui existaient déjà dans la base de données locale est créé par des migrations.</span><span class="sxs-lookup"><span data-stu-id="a4da6-154">This means that when this migration is applied to future databases, the schema that already existed in the local database will be created by migrations.</span></span>

## <a name="things-to-be-aware-of"></a><span data-ttu-id="a4da6-155">Choses à connaître</span><span class="sxs-lookup"><span data-stu-id="a4da6-155">Things to be aware of</span></span>

<span data-ttu-id="a4da6-156">Il existe plusieurs choses à connaître lors de l’utilisation de Migrations par rapport à une base de données existante.</span><span class="sxs-lookup"><span data-stu-id="a4da6-156">There are a few things you need to be aware of when using Migrations against an existing database.</span></span>

### <a name="defaultcalculated-names-may-not-match-existing-schema"></a><span data-ttu-id="a4da6-157">Noms par défaut/calculé peut ne pas correspondent schéma existant</span><span class="sxs-lookup"><span data-stu-id="a4da6-157">Default/calculated names may not match existing schema</span></span>

<span data-ttu-id="a4da6-158">Migrations spécifie explicitement les noms de colonnes et les tables quand il structure un migrations.</span><span class="sxs-lookup"><span data-stu-id="a4da6-158">Migrations explicitly specifies names for columns and tables when it scaffolds a migrations.</span></span> <span data-ttu-id="a4da6-159">Toutefois, il existe d’autres objets de base de données qui Migrations calcule un nom par défaut lors de l’application les migrations.</span><span class="sxs-lookup"><span data-stu-id="a4da6-159">However, there are other database objects that Migrations calculates a default name for when applying the migrations.</span></span> <span data-ttu-id="a4da6-160">Cela inclut les index et contraintes de clé étrangère.</span><span class="sxs-lookup"><span data-stu-id="a4da6-160">This includes indexes and foreign key constraints.</span></span> <span data-ttu-id="a4da6-161">Lorsque vous ciblez un schéma existant, ces noms calculés peut ne pas correspondent ce qui existe réellement dans votre base de données.</span><span class="sxs-lookup"><span data-stu-id="a4da6-161">When targeting an existing schema, these calculated names may not match what actually exists in your database.</span></span>

<span data-ttu-id="a4da6-162">Voici quelques exemples de lorsque vous devez être conscient de cela :</span><span class="sxs-lookup"><span data-stu-id="a4da6-162">Here are some examples of when you need to be aware of this:</span></span>

<span data-ttu-id="a4da6-163">**Si vous avez utilisé « une Option : utiliser un schéma existant comme point de départ ' de l’étape 3 :**</span><span class="sxs-lookup"><span data-stu-id="a4da6-163">**If you used ‘Option One: Use existing schema as a starting point’ from Step 3:**</span></span>

-   <span data-ttu-id="a4da6-164">Si les futures modifications dans votre modèle requièrent la modification ou suppression d’un des objets de base de données qui porte un nom différent, vous devez modifier la migration généré automatiquement pour spécifier le nom correct.</span><span class="sxs-lookup"><span data-stu-id="a4da6-164">If future changes in your model require changing or dropping one of the database objects that is named differently, you will need to modify the scaffolded migration to specify the correct name.</span></span> <span data-ttu-id="a4da6-165">Les API de Migrations ont un paramètre de nom facultatif qui vous permet de procéder.</span><span class="sxs-lookup"><span data-stu-id="a4da6-165">The Migrations APIs have an optional Name parameter that allows you to do this.</span></span>
    <span data-ttu-id="a4da6-166">Par exemple, votre schéma existant peut avoir une table Post avec une colonne de clé étrangère BlogId qui a un index nommé IndexFk\_BlogId.</span><span class="sxs-lookup"><span data-stu-id="a4da6-166">For example, your existing schema may have a Post table with a BlogId foreign key column that has an index named IndexFk\_BlogId.</span></span> <span data-ttu-id="a4da6-167">Toutefois, par défaut Migrations attendez cet index pour être nommé IX\_BlogId.</span><span class="sxs-lookup"><span data-stu-id="a4da6-167">However, by default Migrations would expect this index to be named IX\_BlogId.</span></span> <span data-ttu-id="a4da6-168">Si vous apportez une modification à votre modèle qui provoque la suppression de cet index, vous devez modifier l’appel de DropIndex généré automatiquement pour spécifier le IndexFk\_BlogId nom.</span><span class="sxs-lookup"><span data-stu-id="a4da6-168">If you make a change to your model that results in dropping this index, you will need to modify the scaffolded DropIndex call to specify the IndexFk\_BlogId name.</span></span>

<span data-ttu-id="a4da6-169">**Si vous avez utilisé « Option deux : base de données vide à utiliser comme point de départ ' de l’étape 3 :**</span><span class="sxs-lookup"><span data-stu-id="a4da6-169">**If you used ‘Option Two: Use empty database as a starting point’ from Step 3:**</span></span>

-   <span data-ttu-id="a4da6-170">Tentative d’exécution de la méthode vers le bas de la migration initiale (qui est, retour à la base de données vide) par rapport à votre base de données locale peut échouer, car les Migrations tente de supprimer les index et contraintes de clé étrangère en utilisant les noms incorrects.</span><span class="sxs-lookup"><span data-stu-id="a4da6-170">Trying to run the Down method of the initial migration (that is, reverting to an empty database) against your local database may fail because Migrations will try to drop indexes and foreign key constraints using the incorrect names.</span></span> <span data-ttu-id="a4da6-171">Cela n’affecte que votre base de données locale dans la mesure où les autres bases de données seront créées à partir de zéro à l’aide de la méthode d’accès de la migration initiale.</span><span class="sxs-lookup"><span data-stu-id="a4da6-171">This will only affect your local database since other databases will be created from scratch using the Up method of the initial migration.</span></span>
    <span data-ttu-id="a4da6-172">Si vous souhaitez rétrograder votre base de données local existant à un état vide, il est plus facile d’effectuer cette opération manuellement, soit en supprimant la base de données ou en supprimant toutes les tables.</span><span class="sxs-lookup"><span data-stu-id="a4da6-172">If you want to downgrade your existing local database to an empty state it is easiest to do this manually, either by dropping the database or dropping all the tables.</span></span> <span data-ttu-id="a4da6-173">Après cette opération initiale tous les objets de base de données seront recréées avec les noms par défaut, par conséquent, ce problème ne se pas présentera à nouveau.</span><span class="sxs-lookup"><span data-stu-id="a4da6-173">After this initial downgrade all database objects will be recreated with the default names, so this issue will not present itself again.</span></span>
-   <span data-ttu-id="a4da6-174">Si les futures modifications dans votre modèle requièrent la modification ou suppression d’un des objets de base de données qui porte un nom différent, cela ne fonctionne pas sur votre base de données local existant – étant donné que les noms ne correspondent pas les valeurs par défaut.</span><span class="sxs-lookup"><span data-stu-id="a4da6-174">If future changes in your model require changing or dropping one of the database objects that is named differently, this will not work against your existing local database – since the names won’t match the defaults.</span></span> <span data-ttu-id="a4da6-175">Toutefois, il fonctionnera sur les bases de données qui ont été créés « à partir de zéro » dans la mesure où ils ont utilisera les noms par défaut choisis par des Migrations.</span><span class="sxs-lookup"><span data-stu-id="a4da6-175">However, it will work against databases that were created ‘from scratch’ since they will have used the default names chosen by Migrations.</span></span>
    <span data-ttu-id="a4da6-176">Vous pourrez apporter ces modifications manuellement sur votre base de données local existant, ou faites en sorte que les Migrations recréer votre base de données à partir de zéro – comme il le sera sur d’autres ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="a4da6-176">You could either make these changes manually on your local existing database, or consider having Migrations recreate your database from scratch – as it will on other machines.</span></span>
-   <span data-ttu-id="a4da6-177">Bases de données créées à l’aide de la méthode du haut de la migration initiale peuvent différer légèrement de la base de données locale depuis les noms par défaut calculés pour les index et contraintes de clé étrangère seront utilisés.</span><span class="sxs-lookup"><span data-stu-id="a4da6-177">Databases created using the Up method of your initial migration may differ slightly from the local database since the calculated default names for indexes and foreign key constraints will be used.</span></span> <span data-ttu-id="a4da6-178">Vous pourrez également vous retrouver avec des index supplémentaires comme des Migrations créera des index sur les colonnes de clé étrangère par défaut : il a peut-être pas le cas dans votre base de données locale d’origine.</span><span class="sxs-lookup"><span data-stu-id="a4da6-178">You may also end up with extra indexes as Migrations will create indexes on foreign key columns by default – this may not have been the case in your original local database.</span></span>

### <a name="not-all-database-objects-are-represented-in-the-model"></a><span data-ttu-id="a4da6-179">Pas tous les objets de base de données sont représentées dans le modèle</span><span class="sxs-lookup"><span data-stu-id="a4da6-179">Not all database objects are represented in the model</span></span>

<span data-ttu-id="a4da6-180">Les objets de base de données qui ne font pas partie de votre modèle ne seront pas gérées par des Migrations.</span><span class="sxs-lookup"><span data-stu-id="a4da6-180">Database objects that are not part of your model will not be handled by Migrations.</span></span> <span data-ttu-id="a4da6-181">Cela peut inclure des vues, les procédures stockées, les autorisations, les tables qui ne font pas partie de votre modèle, des index supplémentaires, etc.</span><span class="sxs-lookup"><span data-stu-id="a4da6-181">This can include views, stored procedures, permissions, tables that are not part of your model, additional indexes, etc.</span></span>

<span data-ttu-id="a4da6-182">Voici quelques exemples de lorsque vous devez être conscient de cela :</span><span class="sxs-lookup"><span data-stu-id="a4da6-182">Here are some examples of when you need to be aware of this:</span></span>

-   <span data-ttu-id="a4da6-183">Quelle que soit l’option choisie dans « Étape 3 », si les futures modifications dans votre modèle requièrent la modification ou la suppression de ces objets supplémentaires que migrations ne saura pas pour effectuer ces modifications.</span><span class="sxs-lookup"><span data-stu-id="a4da6-183">Regardless of the option you chose in ‘Step 3’, if future changes in your model require changing or dropping these additional objects Migrations will not know to make these changes.</span></span> <span data-ttu-id="a4da6-184">Par exemple, si vous supprimez une colonne qui a un index supplémentaire sur ce dernier, les Migrations ne saura pas à supprimer l’index.</span><span class="sxs-lookup"><span data-stu-id="a4da6-184">For example, if you drop a column that has an additional index on it, Migrations will not know to drop the index.</span></span> <span data-ttu-id="a4da6-185">Vous devrez l’ajouter manuellement à la Migration du modèle généré automatiquement.</span><span class="sxs-lookup"><span data-stu-id="a4da6-185">You will need to manually add this to the scaffolded Migration.</span></span>
-   <span data-ttu-id="a4da6-186">Si vous avez utilisé « Option deux : base de données vide à utiliser comme point de départ », ces objets supplémentaires ne seront pas créés par la méthode du haut de la migration initiale.</span><span class="sxs-lookup"><span data-stu-id="a4da6-186">If you used ‘Option Two: Use empty database as a starting point’, these additional objects will not be created by the Up method of your initial migration.</span></span>
    <span data-ttu-id="a4da6-187">Vous pouvez modifier le haut et vers le bas des méthodes pour prendre en charge de ces objets supplémentaires si vous le souhaitez.</span><span class="sxs-lookup"><span data-stu-id="a4da6-187">You can modify the Up and Down methods to take care of these additional objects if you wish.</span></span> <span data-ttu-id="a4da6-188">Pour les objets qui ne sont pas en mode natif pris en charge dans l’API de Migrations – tels que les vues – vous pouvez utiliser la [Sql](https://msdn.microsoft.com/library/system.data.entity.migrations.dbmigration.sql.aspx) méthode à exécuter des requêtes SQL brutes pour créer/supprimer les.</span><span class="sxs-lookup"><span data-stu-id="a4da6-188">For objects that are not natively supported in the Migrations API – such as views – you can use the [Sql](https://msdn.microsoft.com/library/system.data.entity.migrations.dbmigration.sql.aspx) method to run raw SQL to create/drop them.</span></span>
